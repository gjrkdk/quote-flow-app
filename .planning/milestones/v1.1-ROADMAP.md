# Milestone v1.1: Publish & Polish

**Status:** SHIPPED 2026-02-08
**Phases:** 07-10
**Total Plans:** 8

## Overview

This milestone took the shipped v1.0 MVP from development to production. The widget was published to npm, the app deployed to Vercel, registered in the Shopify Partner Dashboard, and the complete flow verified end-to-end in production.

## Phases

### Phase 07: Publish Widget to npm

**Goal:** Publish `@gjrkdk/pricing-matrix-widget` to the npm registry so developers can install it
**Status:** Complete (2026-02-07)
**Depends on:** None (widget code complete from v1.0)
**Plans:** 2 plans

Plans:
- [x] 07-01-PLAN.md — Prepare package metadata, README, LICENSE, and verify build
- [x] 07-02-PLAN.md — Authenticate with npm and publish @gjrkdk/pricing-matrix-widget

**Requirements:** PUBLISH-01, PUBLISH-02

---

### Phase 08: Production Deploy to Vercel

**Goal:** Deploy the app to Vercel with a production Neon database and stable URL
**Status:** Complete (2026-02-08)
**Depends on:** None (ran in parallel with Phase 07)
**Plans:** 2 plans

Plans:
- [x] 08-01-PLAN.md — Configure Vercel adapter, Prisma dual-URL, build pipeline, and production TOML
- [x] 08-02-PLAN.md — Create Neon DB, production Shopify app, deploy to Vercel, verify

**Requirements:** DEPLOY-01, DEPLOY-02, DEPLOY-03

---

### Phase 09: Shopify Partner Dashboard Registration

**Goal:** Register the app in Partner Dashboard so merchants can install via direct link
**Status:** Complete (2026-02-08)
**Depends on:** Phase 08 (needs production URL for OAuth config)
**Plans:** 2 plans

Plans:
- [x] 09-01-PLAN.md — Select Public distribution and deploy production TOML to Partner Dashboard
- [x] 09-02-PLAN.md — Test OAuth install flow on development store

**Requirements:** APP-01, APP-02, APP-03

---

### Phase 10: E2E Production Verification

**Goal:** Verify the complete flow works in production from install to Draft Order
**Status:** Complete (2026-02-08)
**Depends on:** Phases 07, 08, 09 (all prior work complete)
**Plans:** 2 plans

Plans:
- [x] 10-01-PLAN.md — Full E2E flow test (install, matrix, API, Draft Order)
- [x] 10-02-PLAN.md — npm widget external integration test

**Requirements:** VERIFY-01, VERIFY-02

---

## Phase Dependencies

```
Phase 07 (npm publish) ──────────────┐
                                      ├──→ Phase 10 (E2E verification)
Phase 08 (Vercel deploy) ──→ Phase 09 (Partner Dashboard) ──┘
```

## Milestone Summary

**Key Decisions:**
- use_legacy_install_flow = true (managed installation creates invalid offline sessions)
- Shop-specific webhooks via afterAuth hook (TOML webhooks incompatible with legacy install)
- OPTIONS before auth in Remix loaders (browser preflight needs 204, not 401)
- npm scope @gjrkdk (original @pricing-matrix was unavailable)

**Issues Resolved:**
- Offline session tokens invalid with managed installation — switched to legacy install flow
- CORS preflight returning 401 — moved OPTIONS handling before auth middleware
- pg.defaults.ssl needed for Neon — Shopify session storage ignores URL params
- unstable_newEmbeddedAuthStrategy incompatible with legacy install flow — removed

**Issues Deferred:**
- In-memory rate limiting (Redis migration for multi-instance)
- Billing gates disabled for testing (TODO markers remain)

**Technical Debt Incurred:**
- Widget ESM build bundles `process.env.NODE_ENV` references from dependencies (consumers may need shim)
- Widget UMD build requires ReactJSXRuntime global (not available from CDN React)

---
_For current project status, see .planning/ROADMAP.md_
