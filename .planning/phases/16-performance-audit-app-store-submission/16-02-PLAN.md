---
phase: 16-performance-audit-app-store-submission
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - .planning/app-store/description.md
  - .planning/app-store/demo-store.md
  - scripts/generate-screenshots.ts
  - package.json
autonomous: true

must_haves:
  truths:
    - "App listing description covers all v1.2 features including option groups"
    - "Test credentials document provides complete setup for Shopify reviewers"
    - "Screenshot automation script captures 3+ screenshots at 1600x900px"
  artifacts:
    - path: ".planning/app-store/description.md"
      provides: "Complete app listing copy"
      contains: "option groups"
    - path: ".planning/app-store/demo-store.md"
      provides: "Test credentials and setup instructions"
      contains: "Test Scenarios"
    - path: "scripts/generate-screenshots.ts"
      provides: "Automated screenshot capture"
      contains: "1600"
  key_links:
    - from: ".planning/app-store/description.md"
      to: "Shopify Partner Dashboard"
      via: "Manual copy-paste during submission"
      pattern: "App Introduction|App Details"
    - from: ".planning/app-store/demo-store.md"
      to: "Shopify Partner Dashboard"
      via: "Test credentials entry during submission"
      pattern: "Store URL|Admin Email"
---

<objective>
Prepare all App Store listing materials: updated description with v1.2 features, test credentials document, and automated screenshot capture script.

Purpose: Success criteria 2 and 3 require complete app listing assets and test credentials. These must be ready before submission.
Output: Updated app description, test credentials doc, screenshot automation script.
</objective>

<execution_context>
@/Users/robinkonijnendijk/.claude/get-shit-done/workflows/execute-plan.md
@/Users/robinkonijnendijk/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/16-performance-audit-app-store-submission/16-RESEARCH.md
@.planning/phases/06-polish-app-store-preparation/APP_STORE_LISTING.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update app listing and create test credentials document</name>
  <files>.planning/app-store/description.md, .planning/app-store/demo-store.md</files>
  <action>
1. Create `.planning/app-store/` directory.

2. Create `.planning/app-store/description.md` — updated App Store listing based on Phase 6's APP_STORE_LISTING.md but updated for v1.2 features:

**Updates from v1.2:**
- Add option groups feature to description and key features
- Update feature list: "Option groups with percentage or fixed price modifiers"
- Update search terms to include "option groups" and "price modifiers"
- Keep app name "Price Matrix" (matches Phase 6 decision)
- Keep description under 500 characters for details section
- Keep introduction under 100 characters
- Update screenshot descriptions to include option groups management
- Keep tone friendly and merchant-focused (per Phase 6 decision)

**Shopify requirements to follow:**
- App name: max 30 characters, starts with brand name
- Introduction: max 100 characters, merchant benefits
- Details: max 500 characters, functionality description
- Search terms: max 5, complete words only
- No "Shopify" in URLs or contact emails
- No pricing info in screenshot descriptions
- Categories: Product Customization (primary), Pricing (secondary)

3. Create `.planning/app-store/demo-store.md` — test credentials template:

Include:
- Store URL placeholder: `dynamic-pricing-demo.myshopify.com` (from Phase 9 — installed on this dev store)
- Admin credentials section (placeholders for user to fill)
- App installation verification steps
- Test scenarios with expected outcomes:
  1. Create a price matrix with 3x3 grid, assign to a product
  2. Navigate to Option Groups, create a group with 2 choices (fixed + percentage)
  3. Assign option group to same product
  4. Use REST API to fetch price with dimensions and options
  5. Create a Draft Order with dimension pricing + options
- Mention that the app is already installed on the demo store
- Include API key info (how to find in Settings page)
- Document the 14-day billing trial
- Note: Do NOT include actual passwords or secrets — use `[FILL_IN]` placeholders
  </action>
  <verify>Both files exist. Description.md mentions "option groups". Demo-store.md has test scenarios. No actual secrets in files.</verify>
  <done>App listing description updated for v1.2 features (option groups, modifiers). Test credentials template complete with setup steps and test scenarios for Shopify reviewers.</done>
</task>

<task type="auto">
  <name>Task 2: Create automated screenshot capture script</name>
  <files>scripts/generate-screenshots.ts, package.json</files>
  <action>
1. Install Playwright as a dev dependency:
   `npm install --save-dev playwright`

2. Create `scripts/generate-screenshots.ts`:

```typescript
import { chromium } from 'playwright';
import { mkdirSync } from 'fs';

const SCREENSHOT_DIR = '.planning/app-store/screenshots';
const VIEWPORT = { width: 1600, height: 900 };

async function generateScreenshots() {
  mkdirSync(SCREENSHOT_DIR, { recursive: true });

  const browser = await chromium.launch();
  const context = await browser.newContext({ viewport: VIEWPORT });
  const page = await context.newPage();

  // Screenshot 1: Dashboard overview
  await page.goto('http://localhost:3000/app');
  await page.waitForLoadState('networkidle');
  await page.screenshot({
    path: `${SCREENSHOT_DIR}/01-dashboard.png`,
    fullPage: false
  });
  console.log('Captured: 01-dashboard.png');

  // Screenshot 2: Matrix editor with price grid
  await page.goto('http://localhost:3000/app/matrices');
  await page.waitForLoadState('networkidle');
  await page.screenshot({
    path: `${SCREENSHOT_DIR}/02-matrices.png`,
    fullPage: false
  });
  console.log('Captured: 02-matrices.png');

  // Screenshot 3: Option groups management
  await page.goto('http://localhost:3000/app/option-groups');
  await page.waitForLoadState('networkidle');
  await page.screenshot({
    path: `${SCREENSHOT_DIR}/03-option-groups.png`,
    fullPage: false
  });
  console.log('Captured: 03-option-groups.png');

  await browser.close();
  console.log(`\nScreenshots saved to ${SCREENSHOT_DIR}/`);
  console.log('Dimensions: 1600x900px (Shopify App Store requirement)');
}

generateScreenshots().catch(console.error);
```

**Important notes:**
- Script requires app to be running locally (`npm run dev`) with data populated
- Screenshots are 1600x900px (exact Shopify requirement)
- Uses `networkidle` to ensure all data is loaded before capture
- Developer should populate demo data before running
- The script targets the embedded admin pages (not the storefront widget)

3. Add script to package.json:
   `"screenshots": "npx tsx scripts/generate-screenshots.ts"`

4. Install Playwright browsers (needed for first run):
   Document that `npx playwright install chromium` must be run before first use.

**Note:** The actual screenshots will be captured by the developer running the script with a local dev server. The script ensures consistent dimensions and naming.
  </action>
  <verify>Script file exists with correct viewport dimensions (1600x900). Package.json has "screenshots" script. `npx tsx scripts/generate-screenshots.ts --help` does not crash (syntax check).</verify>
  <done>Screenshot automation script captures 3 screenshots (dashboard, matrices, option groups) at 1600x900px. Script ready to run against local dev server.</done>
</task>

</tasks>

<verification>
- `.planning/app-store/description.md` exists and mentions option groups
- `.planning/app-store/demo-store.md` exists with test scenarios
- `scripts/generate-screenshots.ts` exists with 1600x900 viewport
- No actual secrets committed
- Package.json has "screenshots" script
</verification>

<success_criteria>
- App listing materials ready for Partner Dashboard entry
- Test credentials template complete with reproducible test scenarios
- Screenshot script automates consistent 1600x900px captures
</success_criteria>

<output>
After completion, create `.planning/phases/16-performance-audit-app-store-submission/16-02-SUMMARY.md`
</output>
