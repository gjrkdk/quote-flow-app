---
phase: 16-performance-audit-app-store-submission
plan: 03
type: execute
wave: 2
depends_on: ["16-01", "16-02"]
files_modified:
  - .planning/app-store/submission-checklist.md
autonomous: false

must_haves:
  truths:
    - "Pre-submission checklist passes all automated verifiable items"
    - "App submitted to Shopify App Store for review via Partner Dashboard"
  artifacts:
    - path: ".planning/app-store/submission-checklist.md"
      provides: "Verified submission checklist"
      contains: "PASS"
  key_links:
    - from: ".planning/app-store/submission-checklist.md"
      to: "Shopify Partner Dashboard"
      via: "Human submits using verified checklist"
      pattern: "Submit for review"
---

<objective>
Run final pre-submission verification and guide the developer through the Shopify App Store submission process.

Purpose: Success criterion 4 requires the app to be submitted to Shopify App Store for review. This plan verifies all prerequisites and provides the submission checklist for the human to execute in Partner Dashboard.
Output: Verified submission checklist, app submitted for review.
</objective>

<execution_context>
@/Users/robinkonijnendijk/.claude/get-shit-done/workflows/execute-plan.md
@/Users/robinkonijnendijk/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/16-performance-audit-app-store-submission/16-RESEARCH.md
@.planning/phases/16-performance-audit-app-store-submission/16-01-SUMMARY.md
@.planning/phases/16-performance-audit-app-store-submission/16-02-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Run pre-submission verification checklist</name>
  <files>.planning/app-store/submission-checklist.md</files>
  <action>
Run automated verification for every App Store requirement that can be checked programmatically:

**Technical Requirements:**
1. GDPR webhooks configured — grep `shopify.server.ts` for CUSTOMERS_DATA_REQUEST, CUSTOMERS_REDACT, SHOP_REDACT (all three must be present)
2. Billing API configured — grep `shopify.server.ts` for billing configuration
3. OAuth flow — verify `auth.$.tsx` and `auth.login` routes exist
4. App Bridge — verify `root.tsx` loads App Bridge script
5. Scopes — verify `shopify.app.toml` has appropriate scopes
6. Database indexes — confirm from 16-01 verification
7. Lighthouse CI — confirm `.lighthouserc.cjs` exists and @lhci/cli installed
8. No deprecated APIs — verify GraphQL usage (from Phase 15 migration)
9. Job queue for GDPR — verify async GDPR processing (from Phase 15)

**App Listing Requirements:**
10. Description under 500 chars — verify from `.planning/app-store/description.md`
11. Introduction under 100 chars — verify from description
12. Search terms max 5 — verify from description
13. Test credentials template — verify `.planning/app-store/demo-store.md` exists
14. Screenshot script — verify `scripts/generate-screenshots.ts` exists

**Create `.planning/app-store/submission-checklist.md`** with each item marked PASS/FAIL with evidence (file:line or command output). Format:

```markdown
# App Store Submission Checklist
Date: [today]

## Technical Requirements
- [x] PASS: GDPR webhooks (shopify.server.ts:39-50)
- [x] PASS: Billing API (shopify.server.ts:25-33)
...

## App Listing Requirements
- [x] PASS: Description ready (.planning/app-store/description.md)
...

## Manual Steps Required
- [ ] Create app icon (1200x1200px)
- [ ] Run screenshot script and verify outputs
- [ ] Fill in test credentials in demo-store.md
- [ ] Upload assets to Partner Dashboard
- [ ] Submit for review
```

For any FAIL items, include the specific fix needed.
  </action>
  <verify>Submission checklist file exists. All automated checks pass. Manual steps are clearly documented.</verify>
  <done>Pre-submission checklist complete with all automated items verified. Any failures documented with remediation steps.</done>
</task>

<task type="checkpoint:human-action" gate="blocking">
  <name>Task 2: Submit app to Shopify App Store</name>
  <files>.planning/app-store/submission-checklist.md</files>
  <action>
Human action required — Claude cannot access the Shopify Partner Dashboard.

All automated preparation is complete:
- Database indexes verified (Plan 16-01)
- Lighthouse CI configured (Plan 16-01)
- App listing description ready with v1.2 option groups (Plan 16-02)
- Test credentials template ready (Plan 16-02)
- Screenshot automation script ready (Plan 16-02)
- Pre-submission checklist verified (Task 1 above)

**Preparation (before Partner Dashboard):**
1. Create app icon (1200x1200px PNG, bold colors, no text, represents pricing grid concept) — use Figma, Canva, or a designer
2. Run `npm run screenshots` with local dev server running and data populated — verify 3 screenshots at 1600x900px in `.planning/app-store/screenshots/`
3. Fill in actual test credentials in `.planning/app-store/demo-store.md` (store URL, admin email/password)
4. Verify the demo store (dynamic-pricing-demo.myshopify.com) has the app installed with sample data (matrices, option groups, product assignments)

**In Partner Dashboard (https://partners.shopify.com):**
5. Navigate to Apps -> QuoteFlow -> Distribution
6. Select "Manage submission" (or "Submit app")
7. Run automated checks — fix any flagged issues
8. Upload app icon (1200x1200px)
9. Upload 3+ screenshots (1600x900px from `.planning/app-store/screenshots/`)
10. Enter app listing from `.planning/app-store/description.md`:
    - App name, introduction (100 chars max), details (500 chars max)
    - Search terms (max 5)
    - Categories: Product Customization (primary)
11. Enter test credentials from `.planning/app-store/demo-store.md`
12. Add privacy policy URL (can use a simple hosted page)
13. Add support email (not containing "shopify")
14. Submit for review

Expected outcome: Submission confirmation from Shopify Partner Dashboard. Review typically takes 4-7 business days.

Resume signal: Type "submitted" with the submission date, or describe any blockers encountered.
  </action>
  <verify>Shopify Partner Dashboard shows submission confirmation. App status changes to "In review".</verify>
  <done>App submitted to Shopify App Store for review via Partner Dashboard.</done>
</task>

</tasks>

<verification>
- `.planning/app-store/submission-checklist.md` exists with all automated checks passing
- App submitted to Shopify App Store (confirmed by human)
</verification>

<success_criteria>
- All pre-submission checks pass
- App submitted to Shopify App Store for review (success criterion 4)
</success_criteria>

<output>
After completion, create `.planning/phases/16-performance-audit-app-store-submission/16-03-SUMMARY.md`
</output>
